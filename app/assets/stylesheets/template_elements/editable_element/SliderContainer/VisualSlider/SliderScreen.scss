@import "/template_sections/mixin/active_effect";

@mixin slider-active-effect($effect_type, $class) {
  @if ($effect_type == 'x-move') {
    #{$class} {
      -webkit-transition: all 1s cubic-bezier(.25, .8, .25, 1);
         -moz-transition: all 1s cubic-bezier(.25, .8, .25, 1);
          -ms-transition: all 1s cubic-bezier(.25, .8, .25, 1);
           -o-transition: all 1s cubic-bezier(.25, .8, .25, 1);
              transition: all 1s cubic-bezier(.25, .8, .25, 1);
      transform: translateX(-100%);
      -ms-transform: translateX(-100%);
      -webkit-transform: translateX(-100%);
      &[data-active=true], .active {
        transform: translateX(0);
        -ms-transform: translateX(0);
        -webkit-transform: translateX(0);
        ~ #{$class} {
          transform: translateX(100%);
          -ms-transform: translateX(100%);
          -webkit-transform: translateX(100%);
        }
      }
    }
  } @else if($effect_type == 'opacity') {
    #{$class} {
      -webkit-transition: all ease .3s;
         -moz-transition: all ease .3s;
          -ms-transition: all ease .3s;
           -o-transition: all ease .3s;
              transition: all ease .3s;
      opacity: 0;
      z-index: -1;
      &[data-active='true'], .active {
        opacity: 1;
        z-index: auto;
      }
    }
  }
}

@mixin iframe-object-fit-contain {
  display: flex;
  justify-content: center;
  align-items: center;
  // TODO: !!! desktop can not full screen
  @media (min-aspect-ratio: 16/9) {
    // width > height
    flex-direction: row;
  }
  @media (max-aspect-ratio: 16/9) {
    // height > width
    flex-direction: column;
  }
  iframe {
    width: 1920* 1.5px;
    height: 1080* 1.5px;
  }
}

.slider-screens {
  position: relative;

  /*
    Make sure the sliders and slider are implement the height class
    reason:
      sliders -> react render sequence cause editor panel get wrong position
      slider  -> swipe slider effect should have real height not fill height
  */
  
  @include wide-desktop {
    .--show-small {
      height: 50vh;
      .js-reframe {
        height: 50vh;
        width: 35% !important;
      }
    }
    .--show-medium {
      height: 66.6vh;
      .js-reframe {
        height: 66.6vh;
        width: 45% !important;
      }
    }
    .--show-large {
      height: 85vh;
      .js-reframe {
        height: 85vh;
        width: 60% !important;
      }
    }
  }

  @include desktop {
    .--show-small {
      height: 50vh;
      .js-reframe {
        height: 50vh;
        width: 30% !important;
      }
    }
    .--show-medium {
      height: 66.6vh;
      .js-reframe {
        height: 66.6vh;
        width: 40% !important;
      }
    }
    .--show-large {
      height: 85vh;
      .js-reframe {
        height: 85vh;
        width: 55% !important;
      }
    }
  }

  @include tablet {
    .--show-small {
      height: 50vh;
      .js-reframe {
        height: 50vh;
        width: 100% !important;
      }
    }
    .--show-medium {
      height: 66.6vh;
      .js-reframe {
        height: 66.6vh;
        width: 100% !important;
      }
    }
    .--show-large {
      height: 85vh;
      .js-reframe {
        height: 85vh;
        width: 100% !important;
      }
    }
  }

  @include mobile {
    .--show-small {
      height: 40vh;
      .js-reframe {
        height: 40vh;
        width: 100% !important;
      }
    }
    .--show-medium {
      height: 50vh;
      .js-reframe {
        height: 50vh;
        width: 100% !important;
      }
    }
    .--show-large {
      height: 60vh;
      .js-reframe {
        height: 60vh;
        width: 100% !important;
      }
    }
  }

  @include small-mobile {
    .--show-small {
      height: 40vh;
      .js-reframe {
        height: 40vh;
        width: 100% !important;
      }
    }
    .--show-medium {
      height: 50vh;
      .js-reframe {
        height: 50vh;
        width: 100% !important;
      }
    }
    .--show-large {
      height: 60vh;
      .js-reframe {
        height: 60vh;
        width: 100% !important;
      }
    }
  }

  .__screen {
    list-style-type: none;

    .abso-full-content {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      margin: auto;
    }

    .picture-foreground {
      background-color: #e9e9e9;
      background-size: cover;
      background-position: center center;
    }

    .video-foreground {
      background: #0F0F0F;
      width: 100%;
      height: 100%;
      overflow: hidden;
      .fallback-video-image {
        background-color: #999999;
        background-size: cover;
        background-position: center center;
      }
      .color-mask {
        background-color: rgba(0, 0, 0, .5);
      }
      iframe { pointer-events: none; }
      @include iframe-object-fit-contain;
    }
  }

  .__screen_iframe {
    width: 100%;
    height: 100%;
  }

  .__screen__text-content {
    text-align: center;
    position: absolute;
    width: calc(100% - 220px);
    top: 50%;
    left: 0;
    right: 0;
    margin: auto;
    transform: translateY(-50%);
    -ms-transform: translateY(-50%);
    -webkit-transform: translateY(-50%);
    transition: all 0.6s cubic-bezier(0.44, 0.13, 0.48, 0.87);
    transition-delay: 0.2s;

    .H {
      margin-bottom: 0.3125rem;
    }

    @include small-mobile {
      width: calc(100% - 140px);
      .H {
        font-size: 1.5rem;
        line-height: 35px;
        margin-bottom: 0.3125rem;
      }
      .P {
        font-size: 0.8125rem;
        line-height: 20px;
        font-weight: 400;
      }
    }
  }
  @include active-effect('opacity', '.__screen__text-content')
}
